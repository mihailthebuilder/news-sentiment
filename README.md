# News Sentiment

Analyzes the overall positivity of news sites. Can be used on any other sites as well.

# Table of Contents
- [News Sentiment](#news-sentiment)
- [Table of Contents](#table-of-contents)
- [How to use](#how-to-use)
  - [`summary.json`](#summaryjson)
  - [`raw_data.json`](#raw_datajson)
- [Scoring methodology](#scoring-methodology)
- [License](#license)

# How to use

Place all the sites you wish to analyse in the [websites.txt](./websites.txt) file and install all the packages from [requirements.txt](./requirements.txt). Then run [main.py](./main.py) with your **Python 3** interpreter.

The script will show the website it's processing at a given point in time:

![processing](./demo/processing.png)

When it's complete, the script will print a notification and generate two `JSON` files.

## `summary.json`

`summary.json` contains a list of dictionaries; each dictionary represents one URL that we had in `requirements.txt`. 

If the website analysis is successful, the URL's dictionary will look like this:

```json
{
  "url": "wired.com",
  "data": {
    "avg_score": 5,
    "max_score": 9.062999999999999,
    "max_text": "The Best Laptop Stands to Save Your Neck",
    "min_score": -7.548,
    "min_text": "A Fight Over GameStop's Soaring Stock Turns Ugly"
  }
}
```

You will notice that the `data` key returns a dictionary with the following information:
- `avg_score` - the overall positivity score for the entire website. **This is the key data point in the output.**
- `max_score` and `min_score` - the maximum and minimum scores achieved by a single piece of text on the website
- `max_text` and `minimum_score` - the single piece of text that yielded the maximum score and the minimum score, respectively

All scores usually range between -10 and +10.

If the analysis is unsuccessful, the `data` key will explain the cause of the problem:

```json
{
  "url": "nowebsite",
  "data": "An error occurred when trying to access the 'https://nowebsite' URL. Error message: 'HTTPSConnectionPool(host='nowebsite', port=443): Max retries exceeded with url: / (Caused by NewConnectionError('<urllib3.connection.HTTPSConnection object at 0x7fa4493462b0>: Failed to establish a new connection: [Errno -2] Name or service not known'))'"
}
```

## `raw_data.json`

As with `summary.json`, `raw_data.json` holds a list of dictionaries that each represent a URL. Below is a dictionary generated by a successful website analysis:

```json
{
  "url": "theguardian.com",
  "data": [
    {
      "text": " Experts defend UK decision to delay second Pfizer jab",
      "combined_score": -2.591,
      "vader_score": -0.3182,
      "afinn_score": -1.0
    },
    {
      "text": " Three arrested in inquiry into 6m Covid fraud",
      "combined_score": -10.9225,
      "vader_score": -0.7845,
      "afinn_score": -7.0
    },
    {
      "text": " Big crowds at airport 'incredibly worrying'  Labour",
      "combined_score": -4.0024999999999995,
      "vader_score": -0.4005,
      "afinn_score": -2.0
    }
  ]
}
```

The `data` key provides the following information:
- `text` - a piece of text from the website that was analyzed
- `vader_score` and `afinn_score` - the text's score when it was run through the VADER and AFINN sentiment analysis tools - [go here](#scoring-methodology) for more details

An error during the website's processing will cause the `data` key to return a value of `null`:

```json
{ "url": "nowebsite", "data": null }  
```

If we can't generate any scores from the website, we get an empty array:

```json
{ "url": "google.com", "data": [] }
```

# Scoring methodology

# License 
Licensed under [Mozilla Public License 2.0](./LICENSE)